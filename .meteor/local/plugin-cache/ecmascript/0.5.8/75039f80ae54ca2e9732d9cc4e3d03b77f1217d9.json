{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/packages/practicalmeteor:mocha/test/reporters/json.js","filenameRelative":"/packages/practicalmeteor:mocha/test/reporters/json.js","env":{},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":false,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/packages/practicalmeteor:mocha/test/reporters/json.js.map","sourceFileName":"/packages/practicalmeteor:mocha/test/reporters/json.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"basename":"json"},"ignored":false,"code":"var Mocha = require('../../'),\n    Suite = Mocha.Suite,\n    Runner = Mocha.Runner,\n    Test = Mocha.Test;\n\ndescribe('json reporter', function () {\n  var suite, runner;\n\n  beforeEach(function () {\n    var mocha = new Mocha({\n      reporter: 'json'\n    });\n    suite = new Suite('JSON suite', 'root');\n    runner = new Runner(suite);\n    var mochaReporter = new mocha._reporter(runner);\n  });\n\n  it('should have 1 test failure', function (done) {\n    var testTitle = 'json test 1';\n    var error = { message: 'oh shit' };\n\n    suite.addTest(new Test(testTitle, function (done) {\n      done(new Error(error.message));\n    }));\n\n    runner.run(function (failureCount) {\n      failureCount.should.be.exactly(1);\n      runner.should.have.property('testResults');\n      runner.testResults.should.have.property('failures');\n      runner.testResults.failures.should.be.an.instanceOf(Array);\n      runner.testResults.failures.should.have.a.lengthOf(1);\n\n      var failure = runner.testResults.failures[0];\n      failure.should.have.property('title', testTitle);\n      failure.err.message.should.equal(error.message);\n      failure.should.have.properties('err');\n\n      done();\n    });\n  });\n\n  it('should have 1 test pending', function (done) {\n    var testTitle = 'json test 1';\n\n    suite.addTest(new Test(testTitle));\n\n    runner.run(function (failureCount) {\n      failureCount.should.be.exactly(0);\n      runner.should.have.property('testResults');\n      runner.testResults.should.have.property('pending');\n      runner.testResults.pending.should.be.an.instanceOf(Array);\n      runner.testResults.pending.should.have.a.lengthOf(1);\n\n      var pending = runner.testResults.pending[0];\n      pending.should.have.property('title', testTitle);\n\n      done();\n    });\n  });\n});","ast":null,"map":{"version":3,"sources":["/packages/practicalmeteor:mocha/test/reporters/json.js"],"names":[],"mappings":"AAAA,IAAI,QAAQ,QAAQ,QAAR,CAAZ;AAAA,IACI,QAAQ,MAAM,KADlB;AAAA,IAEI,SAAS,MAAM,MAFnB;AAAA,IAGI,OAAO,MAAM,IAHjB;;AAKA,SAAS,eAAT,EAA0B,YAAU;AAClC,MAAI,KAAJ,EAAW,MAAX;;AAEA,aAAW,YAAU;AACnB,QAAI,QAAQ,IAAI,KAAJ,CAAU;AACpB,gBAAU;AADU,KAAV,CAAZ;AAGA,YAAQ,IAAI,KAAJ,CAAU,YAAV,EAAwB,MAAxB,CAAR;AACA,aAAS,IAAI,MAAJ,CAAW,KAAX,CAAT;AACA,QAAI,gBAAgB,IAAI,MAAM,SAAV,CAAoB,MAApB,CAApB;AACD,GAPD;;AASC,KAAG,4BAAH,EAAiC,UAAS,IAAT,EAAc;AAC7C,QAAI,YAAY,aAAhB;AACA,QAAI,QAAQ,EAAE,SAAS,SAAX,EAAZ;;AAEA,UAAM,OAAN,CAAc,IAAI,IAAJ,CAAS,SAAT,EAAoB,UAAU,IAAV,EAAgB;AAChD,WAAK,IAAI,KAAJ,CAAU,MAAM,OAAhB,CAAL;AACD,KAFa,CAAd;;AAIA,WAAO,GAAP,CAAW,UAAS,YAAT,EAAuB;AAChC,mBAAa,MAAb,CAAoB,EAApB,CAAuB,OAAvB,CAA+B,CAA/B;AACA,aAAO,MAAP,CAAc,IAAd,CAAmB,QAAnB,CAA4B,aAA5B;AACA,aAAO,WAAP,CAAmB,MAAnB,CAA0B,IAA1B,CAA+B,QAA/B,CAAwC,UAAxC;AACA,aAAO,WAAP,CAAmB,QAAnB,CAA4B,MAA5B,CAAmC,EAAnC,CAAsC,EAAtC,CAAyC,UAAzC,CAAoD,KAApD;AACA,aAAO,WAAP,CAAmB,QAAnB,CAA4B,MAA5B,CAAmC,IAAnC,CAAwC,CAAxC,CAA0C,QAA1C,CAAmD,CAAnD;;AAEA,UAAI,UAAU,OAAO,WAAP,CAAmB,QAAnB,CAA4B,CAA5B,CAAd;AACA,cAAQ,MAAR,CAAe,IAAf,CAAoB,QAApB,CAA6B,OAA7B,EAAsC,SAAtC;AACA,cAAQ,GAAR,CAAY,OAAZ,CAAoB,MAApB,CAA2B,KAA3B,CAAiC,MAAM,OAAvC;AACA,cAAQ,MAAR,CAAe,IAAf,CAAoB,UAApB,CAA+B,KAA/B;;AAEA;AACD,KAbD;AAcF,GAtBA;;AAwBD,KAAG,4BAAH,EAAiC,UAAS,IAAT,EAAe;AAC9C,QAAI,YAAY,aAAhB;;AAEC,UAAM,OAAN,CAAc,IAAI,IAAJ,CAAS,SAAT,CAAd;;AAEA,WAAO,GAAP,CAAW,UAAS,YAAT,EAAuB;AAChC,mBAAa,MAAb,CAAoB,EAApB,CAAuB,OAAvB,CAA+B,CAA/B;AACA,aAAO,MAAP,CAAc,IAAd,CAAmB,QAAnB,CAA4B,aAA5B;AACA,aAAO,WAAP,CAAmB,MAAnB,CAA0B,IAA1B,CAA+B,QAA/B,CAAwC,SAAxC;AACA,aAAO,WAAP,CAAmB,OAAnB,CAA2B,MAA3B,CAAkC,EAAlC,CAAqC,EAArC,CAAwC,UAAxC,CAAmD,KAAnD;AACA,aAAO,WAAP,CAAmB,OAAnB,CAA2B,MAA3B,CAAkC,IAAlC,CAAuC,CAAvC,CAAyC,QAAzC,CAAkD,CAAlD;;AAEA,UAAI,UAAU,OAAO,WAAP,CAAmB,OAAnB,CAA2B,CAA3B,CAAd;AACA,cAAQ,MAAR,CAAe,IAAf,CAAoB,QAApB,CAA6B,OAA7B,EAAsC,SAAtC;;AAEA;AACD,KAXD;AAYF,GAjBD;AAmBD,CAvDD","file":"/packages/practicalmeteor:mocha/test/reporters/json.js.map","sourcesContent":["var Mocha = require('../../')\n  , Suite = Mocha.Suite\n  , Runner = Mocha.Runner\n  , Test = Mocha.Test;\n\ndescribe('json reporter', function(){\n  var suite, runner;\n\n  beforeEach(function(){\n    var mocha = new Mocha({\n      reporter: 'json'\n    });\n    suite = new Suite('JSON suite', 'root');\n    runner = new Runner(suite);\n    var mochaReporter = new mocha._reporter(runner);\n  });\n\n   it('should have 1 test failure', function(done){\n     var testTitle = 'json test 1';\n     var error = { message: 'oh shit' };\n\n     suite.addTest(new Test(testTitle, function (done) {\n       done(new Error(error.message));\n     }));\n\n     runner.run(function(failureCount) {\n       failureCount.should.be.exactly(1);\n       runner.should.have.property('testResults');\n       runner.testResults.should.have.property('failures');\n       runner.testResults.failures.should.be.an.instanceOf(Array);\n       runner.testResults.failures.should.have.a.lengthOf(1);\n\n       var failure = runner.testResults.failures[0];\n       failure.should.have.property('title', testTitle);\n       failure.err.message.should.equal(error.message);\n       failure.should.have.properties('err');\n\n       done();\n     });\n  });\n\n  it('should have 1 test pending', function(done) {\n    var testTitle = 'json test 1';\n\n     suite.addTest(new Test(testTitle));\n\n     runner.run(function(failureCount) {\n       failureCount.should.be.exactly(0);\n       runner.should.have.property('testResults');\n       runner.testResults.should.have.property('pending');\n       runner.testResults.pending.should.be.an.instanceOf(Array);\n       runner.testResults.pending.should.have.a.lengthOf(1);\n\n       var pending = runner.testResults.pending[0];\n       pending.should.have.property('title', testTitle);\n\n       done();\n     });\n  })\n\n});\n"]},"hash":"75039f80ae54ca2e9732d9cc4e3d03b77f1217d9"}
