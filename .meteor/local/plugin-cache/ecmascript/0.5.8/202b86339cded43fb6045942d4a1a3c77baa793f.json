{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/packages/practicalmeteor:mocha/test/acceptance/utils.js","filenameRelative":"/packages/practicalmeteor:mocha/test/acceptance/utils.js","env":{},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":false,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/packages/practicalmeteor:mocha/test/acceptance/utils.js.map","sourceFileName":"/packages/practicalmeteor:mocha/test/acceptance/utils.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"basename":"utils"},"ignored":false,"code":"var utils = require('../../lib/utils');\n\ndescribe('lib/utils', function () {\n  describe('clean', function () {\n    it(\"should format a single line test function\", function () {\n      var fn = [\"function () {\", \"  var a = 1;\", \"}\"].join(\"\\n\");\n      utils.clean(fn).should.equal(\"var a = 1;\");\n    });\n\n    it(\"should format a multi line test indented with spaces\", function () {\n      // and no new lines after curly braces, shouldn't matter\n      var fn = [\"function(){  var a = 1;\", \"    var b = 2;\" // this one has more spaces\n      , \"  var c = 3;  }\"].join(\"\\n\");\n      utils.clean(fn).should.equal(\"var a = 1;\\n  var b = 2;\\nvar c = 3;\");\n    });\n\n    it(\"should format a multi line test indented with tabs\", function () {\n      var fn = [\"function (arg1, arg2)   {\", \"\\tif (true) {\", \"\\t\\tvar a = 1;\", \"\\t}\", \"}\"].join(\"\\n\");\n      utils.clean(fn).should.equal(\"if (true) {\\n\\tvar a = 1;\\n}\");\n    });\n\n    it(\"should format functions saved in windows style - spaces\", function () {\n      var fn = [\"function (one) {\", \"   do {\", '    \"nothing\";', \"   } while (false);\", ' }'].join(\"\\r\\n\");\n      utils.clean(fn).should.equal('do {\\n \"nothing\";\\n} while (false);');\n    });\n\n    it(\"should format functions saved in windows style - tabs\", function () {\n      var fn = [\"function ( )   {\", \"\\tif (false) {\", \"\\t\\tvar json = {\", '\\t\\t\\tone : 1', '\\t\\t};', \"\\t}\", \"}\"].join(\"\\r\\n\");\n      utils.clean(fn).should.equal(\"if (false) {\\n\\tvar json = {\\n\\t\\tone : 1\\n\\t};\\n}\");\n    });\n\n    it(\"should format es6 arrow functions\", function () {\n      var fn = [\"() => {\", \"  var a = 1;\", \"}\"].join(\"\\n\");\n      utils.clean(fn).should.equal(\"var a = 1;\");\n    });\n\n    it(\"should format es6 arrow functions with implicit return\", function () {\n      var fn = \"() => foo()\";\n      utils.clean(fn).should.equal(\"foo()\");\n    });\n  });\n\n  describe('stringify', function () {\n\n    var stringify = utils.stringify;\n\n    it('should return Buffer with .toJSON representation', function () {\n      stringify(new Buffer([0x01])).should.equal('[\\n  1\\n]');\n      stringify(new Buffer([0x01, 0x02])).should.equal('[\\n  1\\n  2\\n]');\n\n      stringify(new Buffer('ABCD')).should.equal('[\\n  65\\n  66\\n  67\\n  68\\n]');\n    });\n\n    it('should return Date object with .toISOString() + string prefix', function () {\n      stringify(new Date(0)).should.equal('[Date: ' + new Date(0).toISOString() + ']');\n\n      var date = new Date(); // now\n      stringify(date).should.equal('[Date: ' + date.toISOString() + ']');\n    });\n\n    it('should return invalid Date object with .toString() + string prefix', function () {\n      stringify(new Date('')).should.equal('[Date: ' + new Date('').toString() + ']');\n    });\n\n    describe('#Number', function () {\n      it('should show the handle -0 situations', function () {\n        stringify(-0).should.eql('-0');\n        stringify(0).should.eql('0');\n        stringify('-0').should.eql('\"-0\"');\n      });\n\n      it('should work well with `NaN` and `Infinity`', function () {\n        stringify(NaN).should.equal('NaN');\n        stringify(Infinity).should.equal('Infinity');\n        stringify(-Infinity).should.equal('-Infinity');\n      });\n\n      it('floats and ints', function () {\n        stringify(1).should.equal('1');\n        stringify(1.2).should.equal('1.2');\n        stringify(1e9).should.equal('1000000000');\n      });\n    });\n\n    describe('canonicalize example', function () {\n      it('should represent the actual full result', function () {\n        var expected = {\n          str: 'string',\n          int: 90,\n          float: 9.99,\n          boolean: false,\n          nil: null,\n          undef: undefined,\n          regex: /^[a-z|A-Z]/,\n          date: new Date(0),\n          func: function () {\n            function func() {}\n\n            return func;\n          }(),\n          infi: Infinity,\n          nan: NaN,\n          zero: -0,\n          buffer: new Buffer([0x01, 0x02]),\n          array: [1, 2, 3],\n          empArr: [],\n          matrix: [[1], [2, 3, 4]],\n          object: { a: 1, b: 2 },\n          canObj: { a: { b: 1, c: 2 }, b: {} },\n          empObj: {}\n        };\n        expected.circular = expected; // Make `Circular` situation\n        var actual = ['{', '  \"array\": [', '    1', '    2', '    3', '  ]', '  \"boolean\": false', '  \"buffer\": [Buffer: [', '    1', '    2', '  ]]', '  \"canObj\": {', '    \"a\": {', '      \"b\": 1', '      \"c\": 2', '    }', '    \"b\": {}', '  }', '  \"circular\": [Circular]', '  \"date\": [Date: 1970-01-01T00:00:00.000Z]', '  \"empArr\": []', '  \"empObj\": {}', '  \"float\": 9.99', '  \"func\": [Function]', '  \"infi\": Infinity', '  \"int\": 90', '  \"matrix\": [', '    [', '      1', '    ]', '    [', '      2', '      3', '      4', '    ]', '  ]', '  \"nan\": NaN', '  \"nil\": [null]', '  \"object\": {', '    \"a\": 1', '    \"b\": 2', '  }', '  \"regex\": /^[a-z|A-Z]/', '  \"str\": \"string\"', '  \"undef\": [undefined]', '  \"zero\": -0', '}'].join('\\n');\n        stringify(expected).should.equal(actual);\n      });\n    });\n\n    it('should canonicalize the object', function () {\n      var travis = { name: 'travis', age: 24 };\n      var travis2 = { age: 24, name: 'travis' };\n\n      stringify(travis).should.equal(stringify(travis2));\n    });\n\n    it('should handle circular structures in objects', function () {\n      var travis = { name: 'travis' };\n      travis.whoami = travis;\n\n      stringify(travis).should.equal('{\\n  \"name\": \"travis\"\\n  \"whoami\": [Circular]\\n}');\n    });\n\n    it('should handle circular structures in arrays', function () {\n      var travis = ['travis'];\n      travis.push(travis);\n\n      stringify(travis).should.equal('[\\n  \"travis\"\\n  [Circular]\\n]');\n    });\n\n    it('should handle circular structures in functions', function () {\n      var travis = function travis() {};\n      travis.fn = travis;\n\n      stringify(travis).should.equal('{\\n  \"fn\": [Circular]\\n}');\n    });\n\n    it('should handle various non-undefined, non-null, non-object, non-array, non-date, and non-function values', function () {\n      var regexp = new RegExp(\"(?:)\"),\n          regExpObj = { regexp: regexp },\n          regexpString = '/(?:)/';\n\n      stringify(regExpObj).should.equal('{\\n  \"regexp\": ' + regexpString + '\\n}');\n      stringify(regexp).should.equal(regexpString);\n\n      var number = 1,\n          numberObj = { number: number },\n          numberString = '1';\n\n      stringify(numberObj).should.equal('{\\n  \"number\": ' + number + '\\n}');\n      stringify(number).should.equal(numberString);\n\n      var boolean = false,\n          booleanObj = { boolean: boolean },\n          booleanString = 'false';\n\n      stringify(booleanObj).should.equal('{\\n  \"boolean\": ' + boolean + '\\n}');\n      stringify(boolean).should.equal(booleanString);\n\n      var string = 'sneepy',\n          stringObj = { string: string };\n\n      stringify(stringObj).should.equal('{\\n  \"string\": \"' + string + '\"\\n}');\n      stringify(string).should.equal(JSON.stringify(string));\n\n      var nullValue = null,\n          nullObj = { 'null': null },\n          nullString = '[null]';\n\n      stringify(nullObj).should.equal('{\\n  \"null\": [null]\\n}');\n      stringify(nullValue).should.equal(nullString);\n    });\n\n    it('should handle arrays', function () {\n      var array = ['dave', 'dave', 'dave', 'dave'],\n          arrayObj = { array: array },\n          arrayString = array.map(function () {\n        return '    \"dave\"';\n      }).join('\\n');\n\n      stringify(arrayObj).should.equal('{\\n  \"array\": [\\n' + arrayString + '\\n  ]\\n}');\n      stringify(array).should.equal('[' + arrayString.replace(/\\s+/g, '\\n  ') + '\\n]');\n    });\n\n    it('should handle functions', function () {\n      var fn = function fn() {},\n          fnObj = { fn: fn },\n          fnString = '[Function]';\n\n      stringify(fnObj).should.equal('{\\n  \"fn\": ' + fnString + '\\n}');\n      stringify(fn).should.equal('[Function]');\n    });\n\n    it('should handle empty objects', function () {\n      stringify({}).should.equal('{}');\n      stringify({ foo: {} }).should.equal('{\\n  \"foo\": {}\\n}');\n    });\n\n    it('should handle empty arrays', function () {\n      stringify([]).should.equal('[]');\n      stringify({ foo: [] }).should.equal('{\\n  \"foo\": []\\n}');\n    });\n\n    it('should handle non-empty arrays', function () {\n      stringify(['a', 'b', 'c']).should.equal('[\\n  \"a\"\\n  \"b\"\\n  \"c\"\\n]');\n    });\n\n    it('should handle empty functions (with no properties)', function () {\n      stringify(function () {}).should.equal('[Function]');\n      stringify({ foo: function () {\n          function foo() {}\n\n          return foo;\n        }() }).should.equal('{\\n  \"foo\": [Function]\\n}');\n      stringify({ foo: function () {\n          function foo() {}\n\n          return foo;\n        }(), bar: 'baz' }).should.equal('{\\n  \"bar\": \"baz\"\\n  \"foo\": [Function]\\n}');\n    });\n\n    it('should handle functions w/ properties', function () {\n      var fn = function fn() {};\n      fn.bar = 'baz';\n      stringify(fn).should.equal('{\\n  \"bar\": \"baz\"\\n}');\n      stringify({ foo: fn }).should.equal('{\\n  \"foo\": {\\n    \"bar\": \"baz\"\\n  }\\n}');\n    });\n\n    it('should handle undefined values', function () {\n      stringify({ foo: undefined }).should.equal('{\\n  \"foo\": [undefined]\\n}');\n      stringify({ foo: 'bar', baz: undefined }).should.equal('{\\n  \"baz\": [undefined]\\n  \"foo\": \"bar\"\\n}');\n      stringify().should.equal('[undefined]');\n    });\n\n    it('should recurse', function () {\n      stringify({ foo: { bar: { baz: { quux: { herp: 'derp' } } } } }).should.equal('{\\n  \"foo\": {\\n    \"bar\": {\\n      \"baz\": {\\n        \"quux\": {\\n          \"herp\": \"derp\"\\n        }\\n      }\\n    }\\n  }\\n}');\n    });\n\n    it('might get confusing', function () {\n      stringify(null).should.equal('[null]');\n    });\n\n    it('should not freak out if it sees a primitive twice', function () {\n      stringify({ foo: null, bar: null }).should.equal('{\\n  \"bar\": [null]\\n  \"foo\": [null]\\n}');\n      stringify({ foo: 1, bar: 1 }).should.equal('{\\n  \"bar\": 1\\n  \"foo\": 1\\n}');\n    });\n\n    it('should stringify dates', function () {\n      var date = new Date(0);\n      stringify(date).should.equal('[Date: 1970-01-01T00:00:00.000Z]');\n      stringify({ date: date }).should.equal('{\\n  \"date\": [Date: 1970-01-01T00:00:00.000Z]\\n}');\n    });\n\n    it('should handle object without an Object prototype', function () {\n      var a = Object.create(null);\n      a.foo = 1;\n\n      stringify(a).should.equal('{\\n  \"foo\": 1\\n}');\n    });\n  });\n\n  describe('type', function () {\n    var type = utils.type;\n    it('should recognize various types', function () {\n      type({}).should.equal('object');\n      type([]).should.equal('array');\n      type(1).should.equal('number');\n      type(Infinity).should.equal('number');\n      type(null).should.equal('null');\n      type(undefined).should.equal('undefined');\n      type(new Date()).should.equal('date');\n      type(/foo/).should.equal('regexp');\n      type('type').should.equal('string');\n      type(global).should.equal('global');\n      type(true).should.equal('boolean');\n    });\n\n    describe('when toString on null or undefined stringifies window', function () {\n      var toString = Object.prototype.toString;\n\n      beforeEach(function () {\n        // some JS engines such as PhantomJS 1.x exhibit this behavior\n        Object.prototype.toString = function () {\n          return '[object DOMWindow]';\n        };\n      });\n\n      it('should recognize null and undefined', function () {\n        type(null).should.equal('null');\n        type(undefined).should.equal('undefined');\n      });\n\n      afterEach(function () {\n        Object.prototype.toString = toString;\n      });\n    });\n  });\n\n  describe('lookupFiles', function () {\n    var fs = require('fs'),\n        path = require('path'),\n        existsSync = fs.existsSync || path.existsSync;\n\n    beforeEach(function () {\n      fs.writeFileSync('/tmp/mocha-utils.js', 'yippy skippy ying yang yow');\n      fs.symlinkSync('/tmp/mocha-utils.js', '/tmp/mocha-utils-link.js');\n    });\n\n    it('should not choke on symlinks', function () {\n      utils.lookupFiles('/tmp', ['js'], false).should.containEql('/tmp/mocha-utils-link.js').and.containEql('/tmp/mocha-utils.js').and.have.lengthOf(2);\n      existsSync('/tmp/mocha-utils-link.js').should.be['true']();\n      fs.renameSync('/tmp/mocha-utils.js', '/tmp/bob');\n      existsSync('/tmp/mocha-utils-link.js').should.be['false']();\n      utils.lookupFiles('/tmp', ['js'], false).should.eql([]);\n    });\n\n    afterEach(function () {\n      ['/tmp/mocha-utils.js', '/tmp/mocha-utils-link.js', '/tmp/bob'].forEach(function (path) {\n        try {\n          fs.unlinkSync(path);\n        } catch (ignored) {}\n      });\n    });\n  });\n});","ast":null,"map":{"version":3,"sources":["/packages/practicalmeteor:mocha/test/acceptance/utils.js"],"names":[],"mappings":"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","file":"/packages/practicalmeteor:mocha/test/acceptance/utils.js.map","sourcesContent":["var utils = require('../../lib/utils');\n\ndescribe('lib/utils', function () {\n  describe('clean', function () {\n    it(\"should format a single line test function\", function () {\n      var fn = [\n        \"function () {\"\n        , \"  var a = 1;\"\n        , \"}\"\n      ].join(\"\\n\");\n      utils.clean(fn).should.equal(\"var a = 1;\");\n    });\n\n    it(\"should format a multi line test indented with spaces\", function () {\n      // and no new lines after curly braces, shouldn't matter\n      var fn = [\n        \"function(){  var a = 1;\"\n        , \"    var b = 2;\" // this one has more spaces\n        , \"  var c = 3;  }\"\n      ].join(\"\\n\");\n      utils.clean(fn).should.equal(\"var a = 1;\\n  var b = 2;\\nvar c = 3;\");\n    });\n\n    it(\"should format a multi line test indented with tabs\", function () {\n      var fn = [\n        \"function (arg1, arg2)   {\"\n        , \"\\tif (true) {\"\n        , \"\\t\\tvar a = 1;\"\n        , \"\\t}\"\n        , \"}\"\n      ].join(\"\\n\");\n      utils.clean(fn).should.equal(\"if (true) {\\n\\tvar a = 1;\\n}\");\n    });\n\n    it(\"should format functions saved in windows style - spaces\", function () {\n      var fn = [\n        \"function (one) {\"\n        , \"   do {\"\n        , '    \"nothing\";'\n        , \"   } while (false);\"\n        , ' }'\n      ].join(\"\\r\\n\");\n      utils.clean(fn).should.equal('do {\\n \"nothing\";\\n} while (false);');\n    });\n\n    it(\"should format functions saved in windows style - tabs\", function () {\n      var fn = [\n        \"function ( )   {\"\n        , \"\\tif (false) {\"\n        , \"\\t\\tvar json = {\"\n        , '\\t\\t\\tone : 1'\n        , '\\t\\t};'\n        , \"\\t}\"\n        , \"}\"\n      ].join(\"\\r\\n\");\n      utils.clean(fn).should.equal(\"if (false) {\\n\\tvar json = {\\n\\t\\tone : 1\\n\\t};\\n}\");\n    });\n\n    it(\"should format es6 arrow functions\", function () {\n      var fn = [\n        \"() => {\",\n        \"  var a = 1;\",\n        \"}\"\n      ].join(\"\\n\");\n      utils.clean(fn).should.equal(\"var a = 1;\");\n    });\n\n    it(\"should format es6 arrow functions with implicit return\", function () {\n      var fn = \"() => foo()\";\n      utils.clean(fn).should.equal(\"foo()\");\n    });\n  });\n\n  describe('stringify', function(){\n\n    var stringify = utils.stringify;\n\n    it('should return Buffer with .toJSON representation', function() {\n      stringify(new Buffer([0x01])).should.equal('[\\n  1\\n]');\n      stringify(new Buffer([0x01, 0x02])).should.equal('[\\n  1\\n  2\\n]');\n\n      stringify(new Buffer('ABCD')).should.equal('[\\n  65\\n  66\\n  67\\n  68\\n]');\n    });\n\n    it('should return Date object with .toISOString() + string prefix', function() {\n      stringify(new Date(0)).should.equal('[Date: ' + new Date(0).toISOString() + ']');\n\n      var date = new Date(); // now\n      stringify(date).should.equal('[Date: ' + date.toISOString() + ']');\n    });\n\n    it('should return invalid Date object with .toString() + string prefix', function() {\n      stringify(new Date('')).should.equal('[Date: ' + new Date('').toString() + ']');\n    });\n\n    describe('#Number', function() {\n      it('should show the handle -0 situations', function() {\n        stringify(-0).should.eql('-0');\n        stringify(0).should.eql('0');\n        stringify('-0').should.eql('\"-0\"');\n      });\n\n      it('should work well with `NaN` and `Infinity`', function() {\n        stringify(NaN).should.equal('NaN');\n        stringify(Infinity).should.equal('Infinity');\n        stringify(-Infinity).should.equal('-Infinity');\n      });\n\n      it('floats and ints', function() {\n        stringify(1).should.equal('1');\n        stringify(1.2).should.equal('1.2');\n        stringify(1e9).should.equal('1000000000');\n      });\n    });\n\n    describe('canonicalize example', function() {\n      it('should represent the actual full result', function() {\n        var expected = {\n          str: 'string',\n          int: 90,\n          float: 9.99,\n          boolean: false,\n          nil: null,\n          undef: undefined,\n          regex: /^[a-z|A-Z]/,\n          date: new Date(0),\n          func: function() {},\n          infi: Infinity,\n          nan: NaN,\n          zero: -0,\n          buffer: new Buffer([0x01, 0x02]),\n          array: [1,2,3],\n          empArr: [],\n          matrix: [[1], [2,3,4] ],\n          object: { a: 1, b: 2 },\n          canObj: { a: { b: 1, c: 2 }, b: {} },\n          empObj: {}\n        };\n        expected.circular = expected; // Make `Circular` situation\n        var actual = ['{'\n          , '  \"array\": ['\n          , '    1'\n          , '    2'\n          , '    3'\n          , '  ]'\n          , '  \"boolean\": false'\n          , '  \"buffer\": [Buffer: ['\n          , '    1'\n          , '    2'\n          , '  ]]'\n          , '  \"canObj\": {'\n          , '    \"a\": {'\n          , '      \"b\": 1'\n          , '      \"c\": 2'\n          , '    }'\n          , '    \"b\": {}'\n          , '  }'\n          , '  \"circular\": [Circular]'\n          , '  \"date\": [Date: 1970-01-01T00:00:00.000Z]'\n          , '  \"empArr\": []'\n          , '  \"empObj\": {}'\n          , '  \"float\": 9.99'\n          , '  \"func\": [Function]'\n          , '  \"infi\": Infinity'\n          , '  \"int\": 90'\n          , '  \"matrix\": ['\n          , '    ['\n          , '      1'\n          , '    ]'\n          , '    ['\n          , '      2'\n          , '      3'\n          , '      4'\n          , '    ]'\n          , '  ]'\n          , '  \"nan\": NaN'\n          , '  \"nil\": [null]'\n          , '  \"object\": {'\n          , '    \"a\": 1'\n          , '    \"b\": 2'\n          , '  }'\n          , '  \"regex\": /^[a-z|A-Z]/'\n          , '  \"str\": \"string\"'\n          , '  \"undef\": [undefined]'\n          , '  \"zero\": -0'\n          , '}'].join('\\n');\n        stringify(expected).should.equal(actual);\n      });\n    });\n\n    it('should canonicalize the object', function(){\n      var travis = { name: 'travis', age: 24 };\n      var travis2 = { age: 24, name: 'travis' };\n\n      stringify(travis).should.equal(stringify(travis2));\n    });\n\n    it('should handle circular structures in objects', function(){\n      var travis = { name: 'travis' };\n      travis.whoami = travis;\n\n      stringify(travis).should.equal('{\\n  \"name\": \"travis\"\\n  \"whoami\": [Circular]\\n}');\n    });\n\n    it('should handle circular structures in arrays', function(){\n      var travis = ['travis'];\n      travis.push(travis);\n\n      stringify(travis).should.equal('[\\n  \"travis\"\\n  [Circular]\\n]');\n    });\n\n    it('should handle circular structures in functions', function(){\n      var travis = function () {};\n      travis.fn = travis;\n\n      stringify(travis).should.equal('{\\n  \"fn\": [Circular]\\n}');\n    });\n\n\n    it('should handle various non-undefined, non-null, non-object, non-array, non-date, and non-function values', function () {\n      var regexp = new RegExp(\"(?:)\"),\n        regExpObj = { regexp: regexp },\n        regexpString = '/(?:)/';\n\n      stringify(regExpObj).should.equal('{\\n  \"regexp\": ' + regexpString + '\\n}');\n      stringify(regexp).should.equal(regexpString);\n\n      var number = 1,\n        numberObj = { number: number },\n        numberString = '1';\n\n      stringify(numberObj).should.equal('{\\n  \"number\": ' + number + '\\n}');\n      stringify(number).should.equal(numberString);\n\n      var boolean = false,\n        booleanObj = { boolean: boolean },\n        booleanString = 'false';\n\n      stringify(booleanObj).should.equal('{\\n  \"boolean\": ' + boolean + '\\n}');\n      stringify(boolean).should.equal(booleanString);\n\n      var string = 'sneepy',\n        stringObj = { string: string };\n\n      stringify(stringObj).should.equal('{\\n  \"string\": \"' + string + '\"\\n}');\n      stringify(string).should.equal(JSON.stringify(string));\n\n      var nullValue = null,\n        nullObj = { 'null': null },\n        nullString = '[null]';\n\n      stringify(nullObj).should.equal('{\\n  \"null\": [null]\\n}');\n      stringify(nullValue).should.equal(nullString);\n    });\n\n    it('should handle arrays', function () {\n      var array = ['dave', 'dave', 'dave', 'dave'],\n        arrayObj = {array: array},\n        arrayString = array.map(function () {\n          return '    \"dave\"';\n        }).join('\\n');\n\n      stringify(arrayObj).should.equal('{\\n  \"array\": [\\n' + arrayString + '\\n  ]\\n}');\n      stringify(array).should.equal('[' + arrayString.replace(/\\s+/g, '\\n  ') + '\\n]');\n    });\n\n    it('should handle functions', function () {\n      var fn = function() {},\n        fnObj = {fn: fn},\n        fnString = '[Function]';\n\n      stringify(fnObj).should.equal('{\\n  \"fn\": ' + fnString + '\\n}');\n      stringify(fn).should.equal('[Function]');\n    });\n\n    it('should handle empty objects', function () {\n      stringify({}).should.equal('{}');\n      stringify({foo: {}}).should.equal('{\\n  \"foo\": {}\\n}');\n    });\n\n    it('should handle empty arrays', function () {\n      stringify([]).should.equal('[]');\n      stringify({foo: []}).should.equal('{\\n  \"foo\": []\\n}');\n    });\n\n    it('should handle non-empty arrays', function () {\n      stringify(['a', 'b', 'c']).should.equal('[\\n  \"a\"\\n  \"b\"\\n  \"c\"\\n]')\n    });\n\n    it('should handle empty functions (with no properties)', function () {\n      stringify(function(){}).should.equal('[Function]');\n      stringify({foo: function() {}}).should.equal('{\\n  \"foo\": [Function]\\n}');\n      stringify({foo: function() {}, bar: 'baz'}).should.equal('{\\n  \"bar\": \"baz\"\\n  \"foo\": [Function]\\n}');\n    });\n\n    it('should handle functions w/ properties', function () {\n      var fn = function(){};\n      fn.bar = 'baz';\n      stringify(fn).should.equal('{\\n  \"bar\": \"baz\"\\n}');\n      stringify({foo: fn}).should.equal('{\\n  \"foo\": {\\n    \"bar\": \"baz\"\\n  }\\n}');\n    });\n\n    it('should handle undefined values', function () {\n      stringify({foo: undefined}).should.equal('{\\n  \"foo\": [undefined]\\n}');\n      stringify({foo: 'bar', baz: undefined}).should.equal('{\\n  \"baz\": [undefined]\\n  \"foo\": \"bar\"\\n}');\n      stringify().should.equal('[undefined]');\n    });\n\n    it('should recurse', function () {\n      stringify({foo: {bar: {baz: {quux: {herp: 'derp'}}}}}).should.equal('{\\n  \"foo\": {\\n    \"bar\": {\\n      \"baz\": {\\n        \"quux\": {\\n          \"herp\": \"derp\"\\n        }\\n      }\\n    }\\n  }\\n}');\n    });\n\n    it('might get confusing', function () {\n      stringify(null).should.equal('[null]');\n    });\n\n    it('should not freak out if it sees a primitive twice', function () {\n      stringify({foo: null, bar: null}).should.equal('{\\n  \"bar\": [null]\\n  \"foo\": [null]\\n}');\n      stringify({foo: 1, bar: 1}).should.equal('{\\n  \"bar\": 1\\n  \"foo\": 1\\n}');\n    });\n\n    it('should stringify dates', function () {\n      var date = new Date(0);\n      stringify(date).should.equal('[Date: 1970-01-01T00:00:00.000Z]');\n      stringify({date: date}).should.equal('{\\n  \"date\": [Date: 1970-01-01T00:00:00.000Z]\\n}');\n    });\n\n    it('should handle object without an Object prototype', function () {\n      var a = Object.create(null);\n      a.foo = 1;\n\n      stringify(a).should.equal('{\\n  \"foo\": 1\\n}');\n    });\n  });\n\n  describe('type', function () {\n    var type = utils.type;\n    it('should recognize various types', function () {\n      type({}).should.equal('object');\n      type([]).should.equal('array');\n      type(1).should.equal('number');\n      type(Infinity).should.equal('number');\n      type(null).should.equal('null');\n      type(undefined).should.equal('undefined');\n      type(new Date()).should.equal('date');\n      type(/foo/).should.equal('regexp');\n      type('type').should.equal('string');\n      type(global).should.equal('global');\n      type(true).should.equal('boolean');\n    });\n\n    describe('when toString on null or undefined stringifies window', function () {\n      var toString = Object.prototype.toString;\n\n      beforeEach(function () {\n        // some JS engines such as PhantomJS 1.x exhibit this behavior\n        Object.prototype.toString = function () {\n          return '[object DOMWindow]';\n        };\n      });\n\n      it('should recognize null and undefined', function () {\n        type(null).should.equal('null');\n        type(undefined).should.equal('undefined');\n      });\n\n      afterEach(function () {\n        Object.prototype.toString = toString;\n      });\n    });\n  });\n\n  describe('lookupFiles', function () {\n    var fs = require('fs'),\n      path = require('path'),\n      existsSync = fs.existsSync || path.existsSync;\n\n    beforeEach(function () {\n      fs.writeFileSync('/tmp/mocha-utils.js', 'yippy skippy ying yang yow');\n      fs.symlinkSync('/tmp/mocha-utils.js', '/tmp/mocha-utils-link.js');\n    });\n\n    it('should not choke on symlinks', function () {\n      utils.lookupFiles('/tmp', ['js'], false)\n        .should.containEql('/tmp/mocha-utils-link.js')\n        .and.containEql('/tmp/mocha-utils.js')\n        .and.have.lengthOf(2);\n      existsSync('/tmp/mocha-utils-link.js').should.be.true();\n      fs.renameSync('/tmp/mocha-utils.js', '/tmp/bob');\n      existsSync('/tmp/mocha-utils-link.js').should.be.false();\n      utils.lookupFiles('/tmp', ['js'], false).should.eql([]);\n    });\n\n    afterEach(function () {\n      ['/tmp/mocha-utils.js', '/tmp/mocha-utils-link.js', '/tmp/bob'].forEach(function (path) {\n        try {\n          fs.unlinkSync(path);\n        }\n        catch (ignored) {}\n      });\n    });\n  });\n});\n"]},"hash":"202b86339cded43fb6045942d4a1a3c77baa793f"}
