{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[{"source":"meteor/practicalmeteor:mocha","imported":["MochaRunner","describe","it","before","after","beforeEach","afterEach","xdescribe","xit","specify","xspecify","context","xcontext"],"specifiers":[{"kind":"named","imported":"MochaRunner","local":"MochaRunner"},{"kind":"named","imported":"describe","local":"describe"},{"kind":"named","imported":"it","local":"it"},{"kind":"named","imported":"before","local":"before"},{"kind":"named","imported":"after","local":"after"},{"kind":"named","imported":"beforeEach","local":"beforeEach"},{"kind":"named","imported":"afterEach","local":"afterEach"},{"kind":"named","imported":"xdescribe","local":"xdescribe"},{"kind":"named","imported":"xit","local":"xit"},{"kind":"named","imported":"specify","local":"specify"},{"kind":"named","imported":"xspecify","local":"xspecify"},{"kind":"named","imported":"context","local":"context"},{"kind":"named","imported":"xcontext","local":"xcontext"}]},{"source":"meteor/practicalmeteor:chai","imported":["expect"],"specifiers":[{"kind":"named","imported":"expect","local":"expect"}]},{"source":"./TestCollection","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"TestCollection"}]}],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/packages/practicalmeteor:mocha/meteor/test-package/mocha-tests.js","filenameRelative":"/packages/practicalmeteor:mocha/meteor/test-package/mocha-tests.js","env":{},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":false,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/packages/practicalmeteor:mocha/meteor/test-package/mocha-tests.js.map","sourceFileName":"/packages/practicalmeteor:mocha/meteor/test-package/mocha-tests.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"basename":"mocha-tests"},"ignored":false,"code":"var MochaRunner,describe,it,before,after,beforeEach,afterEach,xdescribe,xit,specify,xspecify,context,xcontext;module.import(\"meteor/practicalmeteor:mocha\",{\"MochaRunner\":function(v){MochaRunner=v},\"describe\":function(v){describe=v},\"it\":function(v){it=v},\"before\":function(v){before=v},\"after\":function(v){after=v},\"beforeEach\":function(v){beforeEach=v},\"afterEach\":function(v){afterEach=v},\"xdescribe\":function(v){xdescribe=v},\"xit\":function(v){xit=v},\"specify\":function(v){specify=v},\"xspecify\":function(v){xspecify=v},\"context\":function(v){context=v},\"xcontext\":function(v){xcontext=v}});var expect;module.import(\"meteor/practicalmeteor:chai\",{\"expect\":function(v){expect=v}});var TestCollection;module.import(\"./TestCollection\",{\"default\":function(v){TestCollection=v}});\n\n\nconsole.log(\"------------------------------------------------\");\nconsole.log(\"----------------PACKAGE VERSIONS----------------\");\nconsole.log(\"practicalmeteor:mocha:\", MochaRunner.VERSION);\nconsole.log(\"------------------------------------------------\");\nconsole.log(\"------------------------------------------------\");\n\ndescribe('1 - Array', function () {\n\n  describe('1.1 - #indexOf()', function () {\n    return it('should return -1 when the value is not present', function () {\n      expect([1, 2, 3].indexOf(5)).to.equal(-1);\n      return expect([1, 2, 3].indexOf(0)).to.equal(-1);\n    });\n  });\n\n  describe('1.2 - length', function () {\n    return it('should return length of array', function () {\n      return expect([1, 2, 3].length).to.equal(3);\n    });\n  });\n});\n\ndescribe('2 - Async test', function () {\n\n  it('should pass', function (done) {\n    Meteor.setTimeout(function () {\n      done();\n    }, 1000);\n  });\n\n  it('should throw', function (done) {\n    Meteor.setTimeout(function () {\n      done(\"I'm throwing\");\n    }, 1000);\n  });\n});\n\ndescribe('3 - Skipped test', function () {\n\n  it.skip('3.1 - should skip test', function (done) {\n    Meteor.setTimeout(function () {\n      done();\n    }, 1000);\n  });\n\n  it('3.2 - should skip test');\n});\n\ndescribe('4 - Uncaught exception suite', function () {\n\n  it('should fail due to an uncaught exception', function (done) {\n    setTimeout(function () {\n      throw new Error(\"I'm an uncaught exception\");\n      done();\n    }, 1000);\n  });\n});\n\ndescribe('5 - All sync test suite', function () {\n\n  before(function () {\n    console.log('before');\n  });\n\n  after(function () {\n    console.log('after');\n  });\n\n  beforeEach(function () {\n    console.log('beforeEach');\n  });\n\n  afterEach(function () {\n    console.log('afterEach');\n  });\n\n  it('passing', function () {\n    expect(true).to.be[\"true\"];\n  });\n\n  it('throwing', function () {\n    expect(false).to.be[\"true\"];\n  });\n});\n\ndescribe('6 - All async test suite', function () {\n\n  before(function (done) {\n    this.keepContext = true;\n    console.log('before');\n    Meteor.defer(function () {\n      done();\n    });\n  });\n\n  after(function (done) {\n    console.log('after');\n    Meteor.setTimeout(function () {\n      done();\n    }, 500);\n  });\n  beforeEach(function (done) {\n    console.log('beforeEach');\n    Meteor.setTimeout(function () {\n      done();\n    }, 500);\n  });\n  afterEach(function (done) {\n    console.log('afterEach');\n    this.timeout(1000);\n    Meteor.setTimeout(function () {\n      done();\n    }, 500);\n  });\n\n  this.timeout(5000);\n\n  it('passing', function (done) {\n    expect(this.keepContext).to.be[\"true\"];\n    Meteor.setTimeout(function () {\n      done();\n    }, 2500);\n  });\n\n  it('throwing', function (done) {\n    Meteor.defer(function () {\n      done(new Error('failing'));\n    });\n  });\n});\n\ndescribe('7 - implicit wait', function () {\n\n  it('during findOne', function () {\n    var doc;\n    return doc = TestCollection.findOne({\n      _id: 'xxx'\n    });\n  });\n});\n\ndescribe.skip('8 - skip suite', function () {\n  it(\"this won't run\", function () {\n    throw new Error(\"This is an error\");\n  });\n});\n\ndescribe(\"9 -  before and after hooks errors\", function () {\n\n  before(function () {\n    throw new Error(\"Error from before\");\n  });\n\n  it(\"It hooks with errors\", function () {\n    throw new Error(\"This will not throw\");\n  });\n\n  after(function () {\n    throw new Error(\"Error from after\");\n  });\n});\n\ndescribe(\"10 - beforeEach and afterEach hooks errors\", function () {\n\n  beforeEach(function () {\n    throw new Error(\"Error from beforeEach\");\n  });\n\n  it(\"It hooks with errors\", function () {\n    throw new Error(\"This will not throw\");\n  });\n\n  afterEach(function () {\n\n    throw new Error(\"Error from afterEach\");\n  });\n});\n\ndescribe(\"11 - Specify\", function () {\n\n  specify(\"it works\", function () {\n    expect(true).to.be[\"true\"];\n  });\n\n  xspecify(\"Skip: This won't run\", function () {\n    throw new Error(\"This won't run\");\n  });\n});\n\ncontext(\"12 - Context test\", function () {\n  it(\"it works\", function () {\n    expect(true).to.be[\"true\"];\n  });\n});\n\nxcontext(\"12 - Skip suite (xcontext)\", function () {\n\n  it(\"This won't run\", function () {\n    throw new Error(\"This won't run\");\n  });\n});\n\ndescribe(\"13 - Promises\", function () {\n\n  it(\"Handle promises\", function () {\n    return new Promise(function (resolve, reject) {\n      expect(true).to.be[\"true\"];\n      resolve(true);\n    });\n  });\n\n  it('Handle promises errors', function () {\n    return new Promise(function (resolve, reject) {\n      reject(new Error('fails-just-fine'));\n    });\n  });\n});","ast":null,"map":{"version":3,"sources":["/packages/practicalmeteor:mocha/meteor/test-package/mocha-tests.js"],"names":[],"mappings":"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","file":"/packages/practicalmeteor:mocha/meteor/test-package/mocha-tests.js.map","sourcesContent":["import {MochaRunner, describe, it, before, after, beforeEach, afterEach, xdescribe, xit, specify, xspecify, context, xcontext} from \"meteor/practicalmeteor:mocha\"\nimport {expect} from \"meteor/practicalmeteor:chai\"\nimport TestCollection from \"./TestCollection\"\nconsole.log(\"------------------------------------------------\");\nconsole.log(\"----------------PACKAGE VERSIONS----------------\");\nconsole.log(\"practicalmeteor:mocha:\", MochaRunner.VERSION);\nconsole.log(\"------------------------------------------------\");\nconsole.log(\"------------------------------------------------\");\n\n\ndescribe('1 - Array', function() {\n\n  describe('1.1 - #indexOf()', function() {\n    return it('should return -1 when the value is not present', function() {\n      expect([1, 2, 3].indexOf(5)).to.equal(-1);\n      return expect([1, 2, 3].indexOf(0)).to.equal(-1);\n    });\n  });\n\n  describe('1.2 - length', function() {\n    return it('should return length of array', function() {\n      return expect([1, 2, 3].length).to.equal(3);\n    });\n  });\n\n});\n\ndescribe('2 - Async test', function() {\n\n  it('should pass', function(done) {\n    Meteor.setTimeout(function() {\n      done();\n    }, 1000);\n  });\n\n  it('should throw', function(done) {\n    Meteor.setTimeout(function() {\n      done(\"I'm throwing\");\n    }, 1000);\n  });\n\n});\n\ndescribe('3 - Skipped test', function() {\n\n  it.skip('3.1 - should skip test', function(done) {\n    Meteor.setTimeout(function() {\n      done();\n    }, 1000);\n  });\n\n  it('3.2 - should skip test');\n});\n\ndescribe('4 - Uncaught exception suite', function() {\n\n  it('should fail due to an uncaught exception', function(done) {\n    setTimeout(function() {\n      throw new Error(\"I'm an uncaught exception\");\n      done();\n    }, 1000);\n  });\n});\n\ndescribe('5 - All sync test suite', function() {\n\n  before(function() {\n    console.log('before');\n  });\n\n  after(function() {\n    console.log('after');\n  });\n\n  beforeEach(function() {\n    console.log('beforeEach');\n  });\n\n  afterEach(function() {\n    console.log('afterEach');\n  });\n\n  it('passing', function() {\n    expect(true).to.be[\"true\"];\n  });\n\n  it('throwing', function() {\n    expect(false).to.be[\"true\"];\n  });\n});\n\ndescribe('6 - All async test suite', function() {\n\n  before(function(done) {\n    this.keepContext = true;\n    console.log('before');\n    Meteor.defer(function() {\n      done();\n    });\n  });\n\n  after(function(done) {\n    console.log('after');\n    Meteor.setTimeout((function() {\n      done();\n    }), 500);\n  });\n  beforeEach(function(done) {\n    console.log('beforeEach');\n    Meteor.setTimeout((function() {\n      done();\n    }), 500);\n  });\n  afterEach(function(done) {\n    console.log('afterEach');\n    this.timeout(1000);\n    Meteor.setTimeout((function() {\n      done();\n    }), 500);\n  });\n\n  this.timeout(5000);\n\n  it('passing', function(done) {\n    expect(this.keepContext).to.be[\"true\"];\n    Meteor.setTimeout((function() {\n      done();\n    }), 2500);\n  });\n\n  it('throwing', function(done) {\n    Meteor.defer(function() {\n      done(new Error('failing'));\n    });\n  });\n});\n\ndescribe('7 - implicit wait', function() {\n\n  it('during findOne', function() {\n    var doc;\n    return doc = TestCollection.findOne({\n      _id: 'xxx'\n    });\n  });\n\n});\n\ndescribe.skip('8 - skip suite', function() {\n  it(\"this won't run\", function() {\n    throw new Error(\"This is an error\");\n  });\n});\n\ndescribe(\"9 -  before and after hooks errors\", ()=> {\n\n  before(()=> {\n    throw new Error(\"Error from before\");\n  });\n\n  it(\"It hooks with errors\", ()=> {\n    throw new Error(\"This will not throw\")\n  });\n\n  after(()=> {\n    throw new Error(\"Error from after\");\n  });\n\n});\n\ndescribe(\"10 - beforeEach and afterEach hooks errors\", ()=> {\n\n  beforeEach(()=> {\n    throw new Error(\"Error from beforeEach\");\n  });\n\n  it(\"It hooks with errors\", ()=> {\n    throw new Error(\"This will not throw\")\n  });\n\n  afterEach(()=> {\n\n    throw new Error(\"Error from afterEach\");\n  });\n\n});\n\ndescribe(\"11 - Specify\", function() {\n\n  specify(\"it works\", function() {\n    expect(true).to.be.true;\n  });\n\n  xspecify(\"Skip: This won't run\", function() {\n    throw new Error(\"This won't run\")\n  });\n\n});\n\ncontext(\"12 - Context test\", function() {\n  it(\"it works\", function() {\n    expect(true).to.be.true;\n  });\n});\n\nxcontext(\"12 - Skip suite (xcontext)\", function() {\n\n  it(\"This won't run\", function() {\n    throw new Error(\"This won't run\")\n  })\n\n});\n\ndescribe(\"13 - Promises\", ()=> {\n\n  it(\"Handle promises\", ()=> {\n    return new Promise((resolve, reject) => {\n      expect(true).to.be.true\n      resolve(true)\n    })\n  });\n\n  it('Handle promises errors', function() {\n    return new Promise((resolve, reject) => {\n      reject(new Error('fails-just-fine'))\n    })\n  })\n\n});"]},"hash":"1e365334f6267d89c875e40b26cff20a0ea06b55"}
